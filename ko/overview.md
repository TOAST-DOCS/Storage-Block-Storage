## Storage > Block Storage > 개요

블록 스토리지는 인스턴스 기본 디스크 외에 추가로 연결하여 사용할 수 있는 가상 디스크입니다. 

- 연결된 인스턴스를 삭제하더라도 블록 스토리지는 삭제되지 않습니다.
- 블록 스토리지는 여러 개의 인스턴스에서 동시에 연결하여 사용할 수 없습니다.
- 연결이 해제된 블록 스토리지는 다른 인스턴스에 연결하여 쓸 수 있습니다. 
- 블록 스토리지는 같은 가용성 영역 안에 있는 인스턴스에만 연결 가능합니다.

블록 스토리지는 여러 상황에서 쓰입니다. 

- 기본 디스크의 저장 공간이 부족할 때 블록 스토리지를 추가로 장착하여 인스턴스의 저장공간을 늘일 수 있습니다.
- 인스턴스를 삭제하기 전에 인스턴스의 기본 디스크에 있는 데이터를 영구 보관하기 위해 블록 디스크를 장착하고 데이터를 복사할 수 있습니다.

블록 스토리지를 사용하려면 먼저, 

1. [블록 스토리지를 생성](/Storage/Block%20Storage/ko/console-guide/#_1)하고,
2. 그 블록 스토리지를 [대상 인스턴스에 연결](/Storage/Block%20Storage/ko/console-guide/#_4)한 후에,
3. 블록 스토리지를 [파티션, 포맷, 마운트](#_1)하여 사용합니다.

블록 디스크는 인스턴스 실행 중에도 연결할 수 있습니다. 연결된 블록 디스크는 빈 디스크이므로 사용하기 전에 인스턴스의 운영체제에 따라 파티셔닝, 포맷, 마운트 작업을 직접 진행해야 합니다.


## 빈 블록 스토리지 사용하기
### 리눅스 (CentOS / Ubuntu / Debian)

블록 스토리지가 인스턴스에 연결되면,

	# lsblk
	NAME   MAJ:MIN RM SIZE RO TYPE MOUNTPOINT
	vda    253:0    0  20G  0 disk 
	├─vda1 253:1    0   2G  0 part [SWAP]
	└─vda2 253:2    0  18G  0 part /
	vdb    253:16   0  10G  0 disk

와 같이 기본 디스크인 `vda`외에 `vdb`가 장착됩니다.

새로 부착된 블록 스토리지는 빈 디스크이므로, 파티셔닝, 포맷, 마운트 과정을 거쳐야 사용 가능합니다. 다양한 방법으로 파티셔닝과 포맷이 가능합니다. 아래는 CentOS 인스턴스에서 `fdisk`와 `mkfs.ext4`를 이용하여 리눅스 시스템에서 일반적인 용도로 많이 사용되는 EXT4 파일 시스템을 만드는 과정을 예시로 나타낸 것입니다.

	# fdisk /dev/vdb
	Command (m for help): n
	Command action
	   e   extended
	   p   primary partition (1-4)
	p
	Partition number (1-4): 1
	First cylinder (1-20805, default 1): 1
	Last cylinder, +cylinders or +size{K,M,G} (1-20805, default 20805): 20805
	Command (m for help): w

	# mkfs.ext4 /dev/vdb1
	
파일 시스템까지 만들어진 디스크는 마운트 할 위치를 만들고 그 디렉토리에 마운트 한 이후에 사용합니다. 

	# mkdir /mnt/new_disk
	# mount /dev/vdb1 /mnt/new_disk


### 윈도우

블록 스토리지가 윈도우 인스턴스에 연결한 이후에, 시작 버튼에 오른쪽 클릭하고 **디스크 관리**로 들어갑니다. **디스크 관리** 프로그램이 실행되면 새로운 디스크가 부착된 것이 보이고 디스크 초기화 대화창이 나옵니다. 파티션 형식을 아래 2가지 중에서 선택합니다.

* MBR: 예전부터 사용되는 디스크 형식이며, 2TB 이하의 디스크에서 사용합니다.
* GPT: 2TB 이상의 디스크에서 사용하는 새로운 디스크 형식입니다.

리눅스와 마찬가지로 윈도우에서도 새로 추가된 디스크에 여러 파티션을 만들 수 있습니다. 단순히 디스크 전체를 하나의 파티션으로 사용하려면, 새로 추가된 디스크에서 오른쪽 클릭하여 **새 단순 볼륨**을 선택하고 모든 옵션을 기본값으로 설정하면 추가된 디스크 크기만큼의 새로운 볼륨이 생성됩니다.

더 자세한 윈도우에서의 디스크 초기화에 대해서는 [여기](https://docs.microsoft.com/ko-kr/windows-server/storage/disk-management/initialize-new-disks)를 참조하세요.


## 블록 스토리지 스냅숏

블록 스토리지 스냅숏 기능을 이용하면 사용자가 직접 블록 스토리지의 데이터를 복사하는 것보다 빠르게 블록 스토리지 백업이 가능합니다. 블록 스토리지가 인스턴스에 연결되어 있는 상태에서도 블록 스토리지 스냅숏 생성은 가능하지만, 데이터의 정합성과 안정성을 위해 인스턴스에서 연결을 해제하고 블록 스토리지 스냅숏을 생성하는 것을 권장합니다. (블록 스토리지를 인스턴스에서 연결 해제하기 전에 안정성 향상을 위해 마운트 해제 작업을 하기 바랍니다.)

블록 스토리지의 스냅샷은 읽기 전용으로 되어 있으므로 인스턴스에 직접 연결하여 사용할 수 없습니다. 스냅샷을 사용하려면 스냅샷으로부터 블록 스토리지를 생성하고, 생성된 블록 스토리지를 인스턴스에 연결합니다.

> [주의]
블록 스토리지 스냅숏을 갖는 블록 스토리지는 삭제할 수 없습니다. 블록 스토리지를 삭제하려면 그 블록 스토리지의 모든 스냅숏을 삭제하시기 바랍니다.

### 과금

블록 스토리지는 생성한 순간 부터 사용한 저장 공간 만큼 과금됩니다. 빈 블록 스토리지나 스냅샷으로 최종 생성되는 블록 스토리지의 크기만큼 과금됩니다.
